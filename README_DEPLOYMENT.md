# 🌐 Deploy AgenticSeek lên Cloud với OpenAI API

## Tổng quan

AgenticSeek có thể được deploy lên cloud để sử dụng online và chia sẻ với team. Hướng dẫn này sẽ giúp bạn deploy lên các platform như Render.com, Heroku, Railway, v.v.

## ✅ Điều kiện tiên quyết

1. **OpenAI API Key** - Để sử dụng GPT models thay vì local models
2. **GitHub Repository** - Code của bạn cần được push lên GitHub
3. **Cloud Platform Account** - Render.com, Heroku, Railway, etc.

## 🚀 Quick Start với Render.com

### Bước 1: Chuẩn bị Repository

```bash
# Clone repository (nếu chưa có)
git clone https://github.com/your-username/agenticSeek.git
cd agenticSeek

# Tạo file environment
cp .env.production.example .env
```

### Bước 2: Cấu hình OpenAI API Key

Chỉnh sửa file `.env`:
```env
ENVIRONMENT=production
OPENAI_API_KEY=sk-your-actual-openai-api-key-here
```

### Bước 3: Deploy lên Render.com

#### Option A: Sử dụng render.yaml (Khuyến nghị)

1. Push code lên GitHub repository của bạn
2. Truy cập [Render.com](https://render.com)
3. Tạo account và connect GitHub
4. Chọn "New" → "Blueprint"
5. Connect repository và Render sẽ tự động deploy theo `render.yaml`
6. Trong dashboard, set `OPENAI_API_KEY` environment variable

#### Option B: Deploy thủ công

**Backend Service:**
1. New → Web Service
2. Connect GitHub repo
3. Settings:
   - Environment: Docker
   - Dockerfile Path: `Dockerfile.production`
   - Health Check Path: `/health`
4. Environment Variables:
   ```
   ENVIRONMENT=production
   OPENAI_API_KEY=sk-your-api-key
   ```

**Frontend Service:**
1. New → Static Site
2. Connect same repo
3. Settings:
   - Build Command: `cd frontend/agentic-seek-front && npm install && npm run build`
   - Publish Directory: `frontend/agentic-seek-front/build`
4. Environment Variables:
   ```
   REACT_APP_BACKEND_URL=https://your-backend-url.onrender.com
   ```

### Bước 4: Kiểm tra Deployment

- Backend: `https://your-backend.onrender.com/health`
- Frontend: `https://your-frontend.onrender.com`

## 🔧 Cấu hình nâng cao

### Sử dụng Custom Domain

1. Trong Render dashboard, vào Settings → Custom Domains
2. Thêm domain của bạn
3. Cập nhật DNS records theo hướng dẫn
4. Enable HTTPS

### Monitoring và Logs

- **Logs**: Xem trong Render dashboard → Logs tab
- **Metrics**: Monitor CPU, Memory usage
- **Alerts**: Setup alerts cho downtime

### Environment Variables quan trọng

```env
# Required
ENVIRONMENT=production
OPENAI_API_KEY=sk-your-api-key

# Optional
REDIS_URL=redis://...  # Auto-generated by Render
SEARXNG_URL=http://...  # If using external SearXNG
```

## 🏗️ Deploy lên các platform khác

### Heroku

```bash
# Install Heroku CLI
heroku create your-app-name
heroku config:set ENVIRONMENT=production
heroku config:set OPENAI_API_KEY=sk-your-api-key
git push heroku main
```

### Railway

1. Connect GitHub repository
2. Set environment variables trong dashboard
3. Deploy automatically từ main branch

### DigitalOcean App Platform

1. Create App từ GitHub
2. Configure build settings
3. Set environment variables

## 💰 Chi phí ước tính

### Render.com (Starter Plan)
- **Backend**: $7/month
- **Frontend**: Free (Static site)
- **Redis**: $7/month
- **Total**: ~$14/month

### OpenAI API Usage
- **GPT-4o-mini**: ~$0.15-0.60 per 1M tokens
- **Estimated monthly**: $5-20 (depending on usage)

### Total Monthly Cost: ~$20-35

## 🔒 Security Best Practices

1. **API Keys**: Không commit vào git, chỉ set trong environment
2. **CORS**: Restrict origins cho production domains
3. **Rate Limiting**: Implement để tránh abuse
4. **HTTPS**: Always use HTTPS trong production

## 🐛 Troubleshooting

### Common Issues

**1. ChromeDriver errors:**
```
Solution: Dockerfile.production đã handle việc này
```

**2. API Key not working:**
```bash
# Check environment variable
curl https://your-app.onrender.com/health
```

**3. CORS errors:**
```
Solution: Update allowed_origins trong api.py
```

**4. Out of memory:**
```
Solution: Upgrade to higher plan hoặc optimize code
```

### Debug Commands

```bash
# Check logs
render logs --service your-service-name

# Test health endpoint
curl https://your-app.onrender.com/health

# Test API
curl -X POST https://your-app.onrender.com/query \
  -H "Content-Type: application/json" \
  -d '{"query": "Hello, test message"}'
```

## 📞 Support

- **GitHub Issues**: [Create issue](https://github.com/your-repo/issues)
- **Documentation**: [Full docs](./DEPLOYMENT_GUIDE.md)
- **Discord**: [Join community](https://discord.gg/...)

## 🎯 Next Steps

1. **Custom Domain**: Setup your own domain
2. **Monitoring**: Add monitoring tools
3. **CI/CD**: Setup automated deployments
4. **Scaling**: Configure auto-scaling
5. **Backup**: Setup data backup strategies

---

**🎉 Chúc mừng! AgenticSeek của bạn đã sẵn sàng để sử dụng online và chia sẻ với team!**